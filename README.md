# ğŸš€ æ‘‡å¤´çœ‹æ–°é—» (Shaking Head News)

> **"Shake your head while watching the news"** - ä¸€è¾¹æ‘‡å¤´ä¸€è¾¹çœ‹æ–°é—»çš„é¢ˆæ¤å¥åº· Web åº”ç”¨

<p align="center">
  <img width="128" height="128" src="public/icons/ytkxw.png" alt="Shaking Head News Logo" />
</p>

<p align="center">
  <a href="https://github.com/024812/shaking-head-news/actions/workflows/ci.yml">
    <img src="https://github.com/024812/shaking-head-news/actions/workflows/ci.yml/badge.svg" alt="CI/CD Status" />
  </a>
  <a href="https://codecov.io/gh/024812/shaking-head-news">
    <img src="https://codecov.io/gh/024812/shaking-head-news/branch/main/graph/badge.svg" alt="Code Coverage" />
  </a>
  <a href="https://github.com/024812/shaking-head-news/blob/main/LICENSE">
    <img src="https://img.shields.io/badge/license-MPL--2.0-blue.svg" alt="License" />
  </a>
</p>

<p align="center">
  <a href="#english-summary">English</a> â€¢
  <a href="#-åœ¨çº¿æ¼”ç¤º">åœ¨çº¿æ¼”ç¤º</a> â€¢
  <a href="#-ä¸»è¦ç‰¹è‰²">ç‰¹è‰²åŠŸèƒ½</a> â€¢
  <a href="#-å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#-æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</a>
</p>

---

## English Summary

Shaking Head News is a modern web application that promotes neck health through gentle page rotation while browsing daily news. Built with Next.js 16 and React 19, it features customizable news sources, smart caching, user authentication, and two neck health modes to encourage cervical activity.

**Key Features:**

- ğŸ“° Customizable news sources with RSS support
- ğŸ¤¸ Two rotation modes (Fixed/Continuous) for neck health
- ğŸ” Google & Microsoft OAuth authentication with cloud sync
- ğŸŒ Multi-language support (Chinese/English)
- ğŸ“Š Statistics tracking and health reminders
- ğŸ¨ Modern UI with dark mode support
- âš¡ Optimized performance with ISR and caching

---

## ğŸš€ **åœ¨çº¿æ¼”ç¤º**

[https://024812.xyz](https://024812.xyz)

> ç°å·²å‡çº§ä¸º Web åº”ç”¨ï¼Œæ— éœ€å®‰è£…æµè§ˆå™¨æ‰©å±•ï¼Œç›´æ¥è®¿é—®å³å¯ä½¿ç”¨ï¼

### ğŸ†• æœ€è¿‘æ›´æ–° (2025-12)

- âœ… **æŠ€æœ¯æ ˆå‡çº§**: å‡çº§è‡³ Next.js 16ã€React 19.2ã€Tailwind CSS 4.1
- âœ… **æ—‹è½¬è§’åº¦ä¼˜åŒ–**: å°†æœ€å°æ—‹è½¬è§’åº¦æå‡è‡³ 8-25 åº¦ï¼Œå¢å¼ºæ‘‡å¤´æ•ˆæœ
- âœ… **CSS åŠ è½½ä¿®å¤**: ä¼˜åŒ– PostCSS é…ç½®ï¼Œç¡®ä¿ Vercel éƒ¨ç½²æ—¶æ ·å¼æ­£ç¡®åŠ è½½
- âœ… **è®¾ç½®æŒä¹…åŒ–**: ä½¿ç”¨ Microsoft ç¨³å®šæ ‡è¯†ç¬¦ï¼Œç¡®ä¿ç”¨æˆ·è®¾ç½®è·¨ä¼šè¯ä¿ç•™
- âœ… **ä¸»é¢˜åˆ‡æ¢ä¼˜åŒ–**: è®¾ç½®é¡µé¢ä¸»é¢˜é€‰é¡¹ç°åœ¨å¯ä»¥æ­£å¸¸å·¥ä½œ
- âœ… **æ—‹è½¬é—´éš”è°ƒæ•´**: å°†æ—‹è½¬é—´éš”èŒƒå›´ä» 5-300ç§’ ä¼˜åŒ–ä¸º 5-60ç§’

---

## **é¡¹ç›®ç†å¿µ**

çœ‹æ–°é—»è®©äººæ‘‡å¤´å¹æ¯ï¼Ÿä¸å¦‚çœŸçš„æ‘‡æ‘‡å¤´ï¼è¿™æ¬¾åº”ç”¨è®©ä½ åœ¨æµè§ˆæ¯æ—¥æ–°é—»çš„åŒæ—¶ï¼Œé€šè¿‡å·§å¦™çš„é¡µé¢è½¬åŠ¨è®¾è®¡ä¿ƒè¿›é¢ˆæ¤æ´»åŠ¨ï¼ŒæŠŠ"æ‘‡å¤´å¹æ¯"å˜æˆ"å¥åº·æ‘‡å¤´"ã€‚

---

## âœ¨ **ä¸»è¦ç‰¹è‰²**

### ğŸ“° **é«˜åº¦å¯å®šåˆ¶çš„æ–°é—»æº**

- **å†…ç½®æ–°é—»**: é»˜è®¤é›†æˆ [EverydayNews](https://github.com/ravelloh/everydaynews) æ•°æ®æº
- **RSS è®¢é˜…**: æ”¯æŒæ·»åŠ ã€ç®¡ç†å’Œåˆ‡æ¢å¤šä¸ªè‡ªå®šä¹‰ RSS è®¢é˜…æº
- **æ™ºèƒ½ç¼“å­˜**: ISR (Incremental Static Regeneration) ç¼“å­˜ç­–ç•¥ï¼ŒåŠ é€Ÿå†…å®¹åŠ è½½
- **OPML å¯¼å…¥/å¯¼å‡º**: æ–¹ä¾¿è¿ç§»å’Œå¤‡ä»½ RSS è®¢é˜…

### ğŸ¤¸ **æ™ºèƒ½é¢ˆæ¤å¥åº·æ¨¡å¼**

- **ä¸¤ç§æ ¸å¿ƒæ¨¡å¼**:
  - **å›ºå®šæ¨¡å¼ (Fixed)**: é¡µé¢ä¿æŒè¿‘ä¹å›ºå®šï¼Œä»…è¿›è¡Œå¾®å°ã€ä¸æ˜“å¯Ÿè§‰çš„è½¬åŠ¨ï¼Œé€‚åˆéœ€è¦é›†ä¸­æ³¨æ„åŠ›çš„é™æ€é˜…è¯»
  - **è¿ç»­æ¨¡å¼ (Continuous)**: é¡µé¢æŒ‰ç”¨æˆ·è®¾å®šçš„æ—¶é—´é—´éš”ï¼ˆ5-60ç§’å¯è°ƒï¼‰è‡ªåŠ¨è½¬åŠ¨ï¼ˆ8-25åº¦ï¼‰ï¼Œæœ‰æ•ˆæé†’å’Œä¿ƒè¿›é¢ˆéƒ¨æ´»åŠ¨
- **åŠ¨æ•ˆä¸æ— éšœç¢**:
  - **å°Šé‡ç³»ç»Ÿåå¥½**: è‡ªåŠ¨æ£€æµ‹å¹¶éµå¾ªæ“ä½œç³»ç»Ÿçš„"å‡å¼±åŠ¨æ€æ•ˆæœ"è®¾ç½®
  - **æ‰‹åŠ¨æ§åˆ¶**: ç”¨æˆ·å¯éšæ—¶æš‚åœ/ç»§ç»­é¡µé¢æ—‹è½¬ï¼Œæˆ–å®Œå…¨ç¦ç”¨æ—‹è½¬æ•ˆæœ
  - **æ™ºèƒ½ç¦ç”¨**: åœ¨è®¾ç½®é¡µé¢è‡ªåŠ¨ç¦ç”¨æ—‹è½¬ï¼Œé¿å…å¹²æ‰°ç”¨æˆ·è°ƒæ•´è®¾ç½®
  - **æ¸…æ™°çš„çŠ¶æ€æç¤º**: æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·å½“å‰çš„æ—‹è½¬çŠ¶æ€ï¼ˆæ¿€æ´»ã€æš‚åœã€ç¦ç”¨ï¼‰

### ğŸ” **ç”¨æˆ·è®¤è¯ä¸äº‘åŒæ­¥**

- **Google & Microsoft OAuth ç™»å½•**: æ”¯æŒå¤šç§å®‰å…¨ä¾¿æ·çš„ç¬¬ä¸‰æ–¹ç™»å½•æ–¹å¼
- **ç¨³å®šçš„ç”¨æˆ·æ ‡è¯†**: ä½¿ç”¨ Google æä¾›çš„æ°¸ä¹…æ ‡è¯†ç¬¦ï¼Œç¡®ä¿è®¾ç½®æŒä¹…åŒ–
- **äº‘ç«¯è®¾ç½®åŒæ­¥**: ç”¨æˆ·è®¾ç½®è‡ªåŠ¨ä¿å­˜åˆ° Upstash Redisï¼Œè·¨è®¾å¤‡åŒæ­¥
- **éšç§ä¿æŠ¤**: ä»…å­˜å‚¨å¿…è¦çš„ç”¨æˆ·è®¾ç½®ï¼Œä¸æ”¶é›†ä¸ªäººä¿¡æ¯

### ğŸ“Š **ç»Ÿè®¡æ•°æ®ä¸å¥åº·æé†’**

- **è¿åŠ¨è®°å½•**: è‡ªåŠ¨è®°å½•æ¯æ¬¡é¡µé¢æ—‹è½¬çš„è§’åº¦å’Œæ—¶é•¿
- **æ•°æ®å¯è§†åŒ–**: å›¾è¡¨å±•ç¤ºæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆçš„è¿åŠ¨ç»Ÿè®¡
- **å¥åº·æé†’**: æµè§ˆå™¨é€šçŸ¥æé†’ç”¨æˆ·è¾¾æˆæ¯æ—¥è¿åŠ¨ç›®æ ‡
- **ç›®æ ‡è®¾ç½®**: è‡ªå®šä¹‰æ¯æ—¥è¿åŠ¨æ¬¡æ•°ç›®æ ‡

### ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**

- **ä¸­è‹±æ–‡åˆ‡æ¢**: å®Œæ•´çš„ä¸­è‹±æ–‡ç•Œé¢æ”¯æŒ
- **è‡ªåŠ¨æ–°é—»æºåˆ‡æ¢**: æ ¹æ®è¯­è¨€è‡ªåŠ¨åˆ‡æ¢å¯¹åº”çš„æ–°é—»æº
- **æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´**: æ ¹æ®ç”¨æˆ·è¯­è¨€æ˜¾ç¤ºæœ¬åœ°åŒ–çš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼

### ğŸ¨ **ç°ä»£åŒ–ç”¨æˆ·ä½“éªŒ**

- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡
- **æ·±è‰²æ¨¡å¼**: æ”¯æŒæµ…è‰²/æ·±è‰²/è·Ÿéšç³»ç»Ÿä¸‰ç§ä¸»é¢˜æ¨¡å¼
- **å³æ—¶ä¸»é¢˜åˆ‡æ¢**: è®¾ç½®é¡µé¢å’Œé¡¶éƒ¨æŒ‰é’®å‡å¯åˆ‡æ¢ä¸»é¢˜ï¼Œç«‹å³ç”Ÿæ•ˆ
- **å­—ä½“å¤§å°è°ƒæ•´**: 4 æ¡£å­—ä½“å¤§å°å¯é€‰ï¼ˆå°ã€ä¸­ã€å¤§ã€ç‰¹å¤§ï¼‰
- **å¸ƒå±€æ¨¡å¼**: ç´§å‡‘/æ­£å¸¸å¸ƒå±€æ¨¡å¼åˆ‡æ¢
- **æµç•…åŠ¨ç”»**: Framer Motion é©±åŠ¨çš„æµç•…è¿‡æ¸¡åŠ¨ç”»
- **æ— éšœç¢æ”¯æŒ**: å®Œæ•´çš„é”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨æ”¯æŒ

---

## ğŸ› ï¸ **æŠ€æœ¯æ ˆ**

### æ ¸å¿ƒæ¡†æ¶

- **[Next.js 16](https://nextjs.org/)** - React æ¡†æ¶ï¼Œæ”¯æŒ App Routerã€Server Components å’Œ ISR
- **[React 19.2](https://react.dev/)** - æœ€æ–°çš„ React ç‰ˆæœ¬
- **[TypeScript 5.7+](https://www.typescriptlang.org/)** - ç±»å‹å®‰å…¨çš„ JavaScript

### UI å’Œæ ·å¼

- **[Tailwind CSS 4.1](https://tailwindcss.com/)** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **[Shadcn/ui](https://ui.shadcn.com/)** - é«˜è´¨é‡çš„ React ç»„ä»¶åº“
- **[Radix UI](https://www.radix-ui.com/)** - æ— éšœç¢çš„ UI ç»„ä»¶åŸºç¡€
- **[Framer Motion](https://www.framer.com/motion/)** - å¼ºå¤§çš„åŠ¨ç”»åº“
- **[Lucide React](https://lucide.dev/)** - ç¾è§‚çš„å›¾æ ‡åº“

### çŠ¶æ€ç®¡ç†å’Œæ•°æ®

- **[Zustand](https://zustand-demo.pmnd.rs/)** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **[Zod](https://zod.dev/)** - TypeScript ä¼˜å…ˆçš„æ¨¡å¼éªŒè¯
- **[NextAuth.js v5](https://next-auth.js.org/)** - å®Œæ•´çš„è®¤è¯è§£å†³æ–¹æ¡ˆ
- **[Upstash Redis](https://upstash.com/)** - Serverless Redis æ•°æ®åº“ (Vercel Marketplace Storage)

### å›½é™…åŒ–å’Œå·¥å…·

- **[next-intl](https://next-intl-docs.vercel.app/)** - Next.js å›½é™…åŒ–
- **[next-themes](https://github.com/pacocoursey/next-themes)** - ä¸»é¢˜ç®¡ç†
- **[Recharts](https://recharts.org/)** - React å›¾è¡¨åº“

### å¼€å‘å·¥å…·

- **[Turbopack](https://turbo.build/pack)** - æé€Ÿå¼€å‘æ„å»ºå·¥å…·
- **[ESLint 9](https://eslint.org/)** - ä»£ç è´¨é‡æ£€æŸ¥
- **[Prettier](https://prettier.io/)** - ä»£ç æ ¼å¼åŒ–
- **[Husky](https://typicode.github.io/husky/)** - Git hooks
- **[lint-staged](https://github.com/okonet/lint-staged)** - æš‚å­˜æ–‡ä»¶æ£€æŸ¥
- **[Commitlint](https://commitlint.js.org/)** - æäº¤ä¿¡æ¯è§„èŒƒ

### æµ‹è¯• (å¯é€‰)

- **[Vitest](https://vitest.dev/)** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **[React Testing Library](https://testing-library.com/react)** - React ç»„ä»¶æµ‹è¯•
- **[Playwright](https://playwright.dev/)** - E2E æµ‹è¯•

---

## ğŸš€ **å¿«é€Ÿå¼€å§‹**

### ç¯å¢ƒè¦æ±‚

- **Node.js**: 20.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 10.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/024812/shaking-head-news.git
cd shaking-head-news
```

2. **å®‰è£…ä¾èµ–**

```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼š

```env
# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL=http://localhost:3000

# NextAuth.js
NEXTAUTH_SECRET=your-secret-key-here
NEXTAUTH_URL=http://localhost:3000

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Microsoft Entra ID (Optional)
AUTH_MICROSOFT_ENTRA_ID_ID=your-microsoft-client-id
AUTH_MICROSOFT_ENTRA_ID_SECRET=your-microsoft-client-secret
AUTH_MICROSOFT_ENTRA_ID_TENANT_ID=your-microsoft-tenant-id

# Upstash Redis (Vercel Marketplace Storage)
UPSTASH_REDIS_REST_URL=your-upstash-redis-rest-url
UPSTASH_REDIS_REST_TOKEN=your-upstash-redis-rest-token

# æ–°é—» API
NEWS_API_BASE_URL=https://news.ravelloh.top
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
npm run dev
```

åº”ç”¨å°†åœ¨ [http://localhost:3000](http://localhost:3000) å¯åŠ¨ã€‚

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ (ä½¿ç”¨ Turbopack)
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# ä»£ç æ£€æŸ¥
npm run lint

# ä¿®å¤ä»£ç é—®é¢˜
npm run lint:fix

# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼åŒ–
npm run format

# æ£€æŸ¥ä»£ç æ ¼å¼
npm run format:check

# è¿è¡Œæµ‹è¯• (å¯é€‰)
npm run test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡
npm run test:coverage

# è¿è¡Œ E2E æµ‹è¯•
npm run test:e2e

# åˆ†æåŒ…ä½“ç§¯
npm run build:analyze
```

---

## ğŸ“¦ **é¡¹ç›®ç»“æ„**

```
shaking-head-news/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/                   # è®¤è¯ç›¸å…³è·¯ç”±
â”‚   â”‚   â””â”€â”€ login/                # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ (main)/                   # ä¸»åº”ç”¨è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ rss/                  # RSS ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ settings/             # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ stats/                # ç»Ÿè®¡é¡µé¢
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ auth/                 # NextAuth.js API
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µ
â”‚   â”œâ”€â”€ error.tsx                 # é”™è¯¯é¡µé¢
â”‚   â”œâ”€â”€ not-found.tsx             # 404 é¡µé¢
â”‚   â””â”€â”€ providers.tsx             # å…¨å±€ Providers
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                       # Shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ header.tsx            # é¡µå¤´
â”‚   â”‚   â””â”€â”€ footer.tsx            # é¡µè„š
â”‚   â”œâ”€â”€ news/                     # æ–°é—»ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ NewsDisplay.tsx       # æ–°é—»å±•ç¤º
â”‚   â”‚   â”œâ”€â”€ NewsItem.tsx          # æ–°é—»é¡¹
â”‚   â”‚   â””â”€â”€ RefreshButton.tsx    # åˆ·æ–°æŒ‰é’®
â”‚   â”œâ”€â”€ rotation/                 # æ—‹è½¬ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TiltWrapper.tsx       # æ—‹è½¬åŒ…è£…å™¨
â”‚   â”‚   â””â”€â”€ RotationControls.tsx # æ—‹è½¬æ§åˆ¶
â”‚   â”œâ”€â”€ settings/                 # è®¾ç½®ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SettingsPanel.tsx     # è®¾ç½®é¢æ¿
â”‚   â”‚   â””â”€â”€ LanguageSelector.tsx  # è¯­è¨€é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ stats/                    # ç»Ÿè®¡ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ StatsDisplay.tsx      # ç»Ÿè®¡å±•ç¤º
â”‚   â”‚   â”œâ”€â”€ StatsChart.tsx        # ç»Ÿè®¡å›¾è¡¨
â”‚   â”‚   â””â”€â”€ HealthReminder.tsx    # å¥åº·æé†’
â”‚   â””â”€â”€ rss/                      # RSS ç›¸å…³ç»„ä»¶
â”‚       â”œâ”€â”€ RSSSourceList.tsx     # RSS æºåˆ—è¡¨
â”‚       â”œâ”€â”€ AddRSSSourceDialog.tsx # æ·»åŠ  RSS å¯¹è¯æ¡†
â”‚       â””â”€â”€ ExportOPMLButton.tsx  # OPML å¯¼å‡ºæŒ‰é’®
â”œâ”€â”€ lib/                          # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ actions/                  # Server Actions
â”‚   â”‚   â”œâ”€â”€ news.ts               # æ–°é—»æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ settings.ts           # è®¾ç½®æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ stats.ts              # ç»Ÿè®¡æ“ä½œ
â”‚   â”‚   â””â”€â”€ rss.ts                # RSS æ“ä½œ
â”‚   â”œâ”€â”€ stores/                   # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ rotation-store.ts     # æ—‹è½¬çŠ¶æ€
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ error-handler.ts      # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ input-validation.ts   # è¾“å…¥éªŒè¯
â”‚   â”‚   â””â”€â”€ performance.ts        # æ€§èƒ½å·¥å…·
â”‚   â”œâ”€â”€ auth.ts                   # NextAuth.js é…ç½®
â”‚   â”œâ”€â”€ storage.ts                # Upstash Redis å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ rate-limit.ts             # é€Ÿç‡é™åˆ¶
â”‚   â””â”€â”€ i18n.ts                   # å›½é™…åŒ–é…ç½®
â”œâ”€â”€ types/                        # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ news.ts                   # æ–°é—»ç±»å‹
â”‚   â”œâ”€â”€ settings.ts               # è®¾ç½®ç±»å‹
â”‚   â”œâ”€â”€ stats.ts                  # ç»Ÿè®¡ç±»å‹
â”‚   â””â”€â”€ rss.ts                    # RSS ç±»å‹
â”œâ”€â”€ messages/                     # å›½é™…åŒ–ç¿»è¯‘æ–‡ä»¶
â”‚   â”œâ”€â”€ zh.json                   # ä¸­æ–‡ç¿»è¯‘
â”‚   â””â”€â”€ en.json                   # è‹±æ–‡ç¿»è¯‘
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icons/                    # å›¾æ ‡
â”‚   â””â”€â”€ images/                   # å›¾ç‰‡
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ SETUP.md                  # è®¾ç½®æŒ‡å—
â”‚   â”œâ”€â”€ MIGRATION_CLEANUP.md      # è¿ç§»æ¸…ç†æŒ‡å—
â”‚   â”œâ”€â”€ PERFORMANCE_GUIDE.md      # æ€§èƒ½æŒ‡å—
â”‚   â””â”€â”€ PRE_DEPLOYMENT_CHECKLIST.md # éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•
â”œâ”€â”€ .kiro/                        # Kiro AI è§„èŒƒæ–‡æ¡£
â”‚   â””â”€â”€ specs/                    # æŠ€æœ¯è§„èŒƒ
â”‚       â””â”€â”€ tech-stack-upgrade/   # æŠ€æœ¯æ ˆå‡çº§è§„èŒƒ
â”‚           â”œâ”€â”€ requirements.md   # éœ€æ±‚æ–‡æ¡£
â”‚           â”œâ”€â”€ design.md         # è®¾è®¡æ–‡æ¡£
â”‚           â”œâ”€â”€ tasks.md          # ä»»åŠ¡åˆ—è¡¨
â”‚           â””â”€â”€ SECURITY_IMPLEMENTATION.md # å®‰å…¨å®æ–½æŒ‡å—
â”œâ”€â”€ next.config.js                # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.ts            # Tailwind CSS é…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”œâ”€â”€ proxy.ts                      # ä¸­é—´ä»¶ (è®¤è¯å’Œå®‰å…¨)
â””â”€â”€ package.json                  # é¡¹ç›®é…ç½®
```

---

## ğŸ”§ **é…ç½®è¯´æ˜**

### Google OAuth é…ç½®

1. è®¿é—® [Google Cloud Console](https://console.cloud.google.com/)
2. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
3. å¯ç”¨ Google+ API
4. åˆ›å»º OAuth 2.0 å®¢æˆ·ç«¯ ID
5. æ·»åŠ æˆæƒé‡å®šå‘ URIï¼š
   - å¼€å‘ç¯å¢ƒ: `http://localhost:3000/api/auth/callback/google`
   - ç”Ÿäº§ç¯å¢ƒ: `https://your-domain.com/api/auth/callback/google`
6. å¤åˆ¶å®¢æˆ·ç«¯ ID å’Œå®¢æˆ·ç«¯å¯†é’¥åˆ° `.env.local`

### Microsoft Entra ID é…ç½® (å¯é€‰)

1. è®¿é—® [Azure Portal](https://portal.azure.com/)
2. æœç´¢å¹¶è¿›å…¥ "Microsoft Entra ID"
3. ç‚¹å‡» "App registrations" -> "New registration"
4. é…ç½®åº”ç”¨:
   - Name: Shaking Head News
   - Supported account types: Accounts in any organizational directory (Any Microsoft Entra ID tenant - Multitenant) and personal Microsoft accounts (e.g. Skype, Xbox)
   - Redirect URI: Web - `http://localhost:3000/api/auth/callback/microsoft-entra-id`
5. åˆ›å»ºåï¼Œå¤åˆ¶ "Application (client) ID" å’Œ "Directory (tenant) ID" åˆ° `.env.local`
6. åœ¨ "Certificates & secrets" ä¸­åˆ›å»ºæ–°çš„ Client Secretï¼Œå¹¶å¤åˆ¶ Value åˆ° `.env.local`

### Upstash Redis é…ç½®

1. è®¿é—® [Upstash Console](https://console.upstash.com/)
2. åˆ›å»ºæ–°çš„ Redis æ•°æ®åº“
3. é€‰æ‹©åŒºåŸŸï¼ˆæ¨èï¼šé¦™æ¸¯æˆ–æ–°åŠ å¡ï¼‰
4. å¤åˆ¶ REST URL å’Œ REST Token åˆ° `.env.local`

æˆ–è€…åœ¨ Vercel éƒ¨ç½²æ—¶ï¼š

1. åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­
2. è¿›å…¥ "Storage" æ ‡ç­¾
3. æ·»åŠ  Upstash Redis (Vercel Marketplace Storage)
4. ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨é…ç½®

---

## ğŸ”’ **éšç§å’Œå®‰å…¨**

### å·²å®æ–½çš„å®‰å…¨æªæ–½

- âœ… **Content Security Policy (CSP)**: é˜²æ­¢ XSS æ”»å‡»
- âœ… **é€Ÿç‡é™åˆ¶**: 4 ä¸ªå±‚çº§çš„é€Ÿç‡é™åˆ¶ï¼Œé˜²æ­¢æ»¥ç”¨
- âœ… **è¾“å…¥éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡éªŒè¯å’Œæ¸…ç†
- âœ… **CORS é…ç½®**: ä¸¥æ ¼çš„è·¨åŸŸèµ„æºå…±äº«ç­–ç•¥
- âœ… **ç”¨æˆ·æƒé™éªŒè¯**: æ‰€æœ‰ Server Actions éƒ½éªŒè¯ç”¨æˆ·æƒé™
- âœ… **XSS é˜²æŠ¤**: è¾“å…¥æ¸…ç†å’Œ CSP headers
- âœ… **CSRF é˜²æŠ¤**: NextAuth.js å†…ç½® CSRF ä¿æŠ¤
- âœ… **SQL æ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨ Zod éªŒè¯å’Œå‚æ•°åŒ–æŸ¥è¯¢

### æ•°æ®éšç§

- **æœ€å°æ•°æ®æ”¶é›†**: ä»…æ”¶é›†å¿…è¦çš„ç”¨æˆ·è®¾ç½®å’Œç»Ÿè®¡æ•°æ®
- **æœ¬åœ°ä¼˜å…ˆ**: æœªç™»å½•ç”¨æˆ·çš„è®¾ç½®ä»…å­˜å‚¨åœ¨æœ¬åœ°
- **äº‘ç«¯åŠ å¯†**: ç”¨æˆ·æ•°æ®åœ¨ Upstash Redis ä¸­åŠ å¯†å­˜å‚¨
- **ä¸è¿½è¸ª**: ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹è¿½è¸ªå·¥å…·
- **å¯åˆ é™¤**: ç”¨æˆ·å¯éšæ—¶åˆ é™¤è‡ªå·±çš„æ•°æ®

è¯¦ç»†çš„å®‰å…¨å®æ–½æ–‡æ¡£è¯·å‚è€ƒï¼š[SECURITY_IMPLEMENTATION.md](.kiro/specs/tech-stack-upgrade/SECURITY_IMPLEMENTATION.md)

---

## ğŸš€ **éƒ¨ç½²**

### Vercel éƒ¨ç½² (æ¨è)

1. **Fork æœ¬é¡¹ç›®åˆ°ä½ çš„ GitHub è´¦å·**

2. **åœ¨ Vercel ä¸­å¯¼å…¥é¡¹ç›®**
   - è®¿é—® [Vercel](https://vercel.com/)
   - ç‚¹å‡» "New Project"
   - å¯¼å…¥ä½ çš„ GitHub ä»“åº“

3. **é…ç½®ç¯å¢ƒå˜é‡**
   - åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡
   - å‚è€ƒ `.env.example` æ–‡ä»¶

4. **æ·»åŠ  Upstash Redis**
   - åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­
   - è¿›å…¥ "Storage" æ ‡ç­¾
   - æ·»åŠ  Upstash Redis
   - ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨é…ç½®

5. **é…ç½® CI/CD**
   - å‚è€ƒ [CI/CD è®¾ç½®æŒ‡å—](.github/ACTIONS_SETUP.md)
   - é…ç½® GitHub Secrets (VERCEL_TOKEN, VERCEL_ORG_ID, VERCEL_PROJECT_ID)
   - æ¨é€ä»£ç ä¼šè‡ªåŠ¨è§¦å‘ CI/CD æµç¨‹

6. **éƒ¨ç½²**
   - Vercel ä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
   - æ¯æ¬¡æ¨é€åˆ°ä¸»åˆ†æ”¯éƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²
   - Pull Request ä¼šè‡ªåŠ¨åˆ›å»ºé¢„è§ˆéƒ¨ç½²

### è‡ªå®šä¹‰åŸŸå

1. åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
2. é…ç½® DNS è®°å½•æŒ‡å‘ Vercel
3. SSL è¯ä¹¦ä¼šè‡ªåŠ¨é…ç½®
4. æ›´æ–° Google OAuth å›è°ƒ URL
5. æ›´æ–° Microsoft Entra ID å›è°ƒ URL (å¦‚æœä½¿ç”¨)

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
NEXT_PUBLIC_APP_URL=https://your-domain.com
NEXTAUTH_SECRET=your-secret-key
NEXTAUTH_URL=https://your-domain.com
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
AUTH_MICROSOFT_ENTRA_ID_ID=your-microsoft-id
AUTH_MICROSOFT_ENTRA_ID_SECRET=your-microsoft-secret
AUTH_MICROSOFT_ENTRA_ID_TENANT_ID=your-microsoft-tenant-id
UPSTASH_REDIS_REST_URL=your-upstash-url
UPSTASH_REDIS_REST_TOKEN=your-upstash-token
NEWS_API_BASE_URL=https://news.ravelloh.top
```

è¯¦ç»†çš„éƒ¨ç½²æ£€æŸ¥æ¸…å•è¯·å‚è€ƒï¼š[PRE_DEPLOYMENT_CHECKLIST.md](docs/PRE_DEPLOYMENT_CHECKLIST.md)

---

## ğŸ§ª **æµ‹è¯•**

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œ E2E æµ‹è¯•
npm run test:e2e
```

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

- å•å…ƒæµ‹è¯•è¦†ç›–ç‡: 70%+
- Server Actions: 100%
- å…³é”®ç”¨æˆ·æµç¨‹: E2E æµ‹è¯•è¦†ç›–

---

## ğŸ“Š **æ€§èƒ½ä¼˜åŒ–**

### å·²å®æ–½çš„ä¼˜åŒ–æªæ–½

- âœ… **ISR ç¼“å­˜**: æ–°é—»å†…å®¹ä½¿ç”¨ ISRï¼Œ1 å°æ—¶é‡æ–°éªŒè¯
- âœ… **å›¾ç‰‡ä¼˜åŒ–**: Next.js Image ç»„ä»¶è‡ªåŠ¨ä¼˜åŒ–
- âœ… **ä»£ç åˆ†å‰²**: åŠ¨æ€å¯¼å…¥é‡å‹ç»„ä»¶
- âœ… **å­—ä½“ä¼˜åŒ–**: å­—ä½“é¢„åŠ è½½å’Œå­é›†åŒ–
- âœ… **DNS é¢„å–**: é¢„è¿æ¥åˆ°å¤–éƒ¨åŸŸå
- âœ… **Bundle åˆ†æ**: ä½¿ç”¨ @next/bundle-analyzer åˆ†æåŒ…ä½“ç§¯

---

## ğŸ“ˆ **ç›‘æ§å’Œæ—¥å¿—**

### ç›‘æ§åŠŸèƒ½

åº”ç”¨å†…ç½®äº†å®Œæ•´çš„ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿï¼š

- **é”™è¯¯ç›‘æ§**: Sentry é›†æˆï¼Œå®æ—¶é”™è¯¯è¿½è¸ªå’Œæ€§èƒ½ç›‘æ§
- **ç”¨æˆ·åˆ†æ**: Google Analytics å’Œ Vercel Analytics æ”¯æŒ
- **æ€§èƒ½ç›‘æ§**: Web Vitals è‡ªåŠ¨è¿½è¸ª (LCP, FID, CLS, etc.)
- **ç»“æ„åŒ–æ—¥å¿—**: å¤šçº§åˆ«æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ

### å¿«é€Ÿè®¾ç½®

```bash
# è¿è¡Œç›‘æ§è®¾ç½®è„šæœ¬ (Windows)
.\scripts\setup-monitoring.ps1
```

### ç¯å¢ƒå˜é‡é…ç½®

```env
# Sentry (å¯é€‰)
NEXT_PUBLIC_SENTRY_DSN=https://your-dsn@sentry.io/project-id

# Google Analytics (å¯é€‰)
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# æ—¥å¿—çº§åˆ« (å¯é€‰)
NEXT_PUBLIC_LOG_LEVEL=info
```

### ä½¿ç”¨ç¤ºä¾‹

```typescript
import { logger } from '@/lib/logger'
import { trackEvent } from '@/lib/analytics'
import { captureException } from '@/lib/sentry'

// è®°å½•æ—¥å¿—
logger.info('User action', { userId: '123' })

// è¿½è¸ªäº‹ä»¶
trackEvent({
  action: 'click',
  category: 'button',
  label: 'refresh',
})

// æ•è·é”™è¯¯
try {
  await riskyOperation()
} catch (error) {
  captureException(error)
}
```

### æ–‡æ¡£

- **å¿«é€Ÿå¼€å§‹**: [MONITORING_QUICK_START.md](docs/MONITORING_QUICK_START.md)
- **å®Œæ•´æ–‡æ¡£**: [MONITORING_AND_LOGGING.md](.kiro/specs/tech-stack-upgrade/MONITORING_AND_LOGGING.md)

### æ€§èƒ½æŒ‡æ ‡

- **LCP (Largest Contentful Paint)**: < 2.5s
- **FID (First Input Delay)**: < 100ms
- **CLS (Cumulative Layout Shift)**: < 0.1
- **TTI (Time to Interactive)**: < 3.5s

è¯¦ç»†çš„æ€§èƒ½æŒ‡å—è¯·å‚è€ƒï¼š[PERFORMANCE_GUIDE.md](docs/PERFORMANCE_GUIDE.md)

---

## ğŸ¤ **è´¡çŒ®æŒ‡å—**

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æµç¨‹

1. **Fork æœ¬é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/AmazingFeature
   ```
3. **æäº¤æ›´æ”¹**
   ```bash
   git commit -m 'feat: add some amazing feature'
   ```
4. **æ¨é€åˆ°åˆ†æ”¯**
   ```bash
   git push origin feature/AmazingFeature
   ```
5. **åˆ›å»º Pull Request**

### æäº¤ä¿¡æ¯è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·ç›¸å…³

### ä»£ç è§„èŒƒ

- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç¼–å†™æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- ä¿æŒä»£ç è¦†ç›–ç‡

---

## ğŸ“„ **å¼€æºåè®®**

æœ¬é¡¹ç›®åŸºäº [MPL-2.0](LICENSE) åè®®å¼€æºã€‚

---

## ğŸ™ **è‡´è°¢**

### æ•°æ®æº

- æ–°é—»æ•°æ®æ¥æºï¼š[EverydayNews](https://github.com/ravelloh/everydaynews)
- æ„Ÿè°¢ [@ravelloh](https://github.com/ravelloh) æä¾›çš„æ¯æ—¥æ–°é—» API

### æŠ€æœ¯æ ˆ

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Vercel](https://vercel.com/) - éƒ¨ç½²å¹³å°
- [Shadcn/ui](https://ui.shadcn.com/) - UI ç»„ä»¶åº“
- [Upstash](https://upstash.com/) - Serverless Redis

---

## ğŸ“ **è”ç³»æ–¹å¼**

- **ä½œè€…**: 024812
- **Email**: 024812@users.noreply.github.com
- **GitHub**: [@024812](https://github.com/024812)
- **é¡¹ç›®ä¸»é¡µ**: [https://github.com/024812/shaking-head-news](https://github.com/024812/shaking-head-news)

---

## ğŸ—ºï¸ **è·¯çº¿å›¾**

### å·²å®Œæˆ âœ…

- [x] Next.js 16 + React 19.2 è¿ç§»
- [x] Tailwind CSS 4.1 å‡çº§
- [x] ç”¨æˆ·è®¤è¯å’Œäº‘åŒæ­¥ï¼ˆä½¿ç”¨ç¨³å®šçš„ç”¨æˆ·æ ‡è¯†ç¬¦ï¼‰
- [x] å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰
- [x] RSS æºç®¡ç†ï¼ˆOPML å¯¼å…¥/å¯¼å‡ºï¼‰
- [x] ç»Ÿè®¡æ•°æ®å’Œå¥åº·æé†’
- [x] æ€§èƒ½ä¼˜åŒ–ï¼ˆISRã€å›¾ç‰‡ä¼˜åŒ–ã€ä»£ç åˆ†å‰²ï¼‰
- [x] å®‰å…¨åŠ å›ºï¼ˆCSPã€é€Ÿç‡é™åˆ¶ã€è¾“å…¥éªŒè¯ï¼‰
- [x] è®¾ç½®é¡µé¢æ—‹è½¬ç¦ç”¨
- [x] ä¸»é¢˜åˆ‡æ¢ä¼˜åŒ–
- [x] CSS åŠ è½½ä¿®å¤ï¼ˆPostCSS é…ç½®ä¼˜åŒ–ï¼‰

### è®¡åˆ’ä¸­ ğŸš§

- [ ] PWA æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ App
- [ ] æ›´å¤šæ–°é—»æº
- [ ] ç¤¾äº¤åˆ†äº«åŠŸèƒ½
- [ ] ç”¨æˆ·ç¤¾åŒº
- [ ] AI æ–°é—»æ‘˜è¦

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- [è®¾ç½®æŒ‡å—](docs/SETUP.md)
- [è¿ç§»æ¸…ç†æŒ‡å—](docs/MIGRATION_CLEANUP.md)
- [æ€§èƒ½æŒ‡å—](docs/PERFORMANCE_GUIDE.md)
- [éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•](docs/PRE_DEPLOYMENT_CHECKLIST.md)
- [å®‰å…¨å®æ–½æŒ‡å—](.kiro/specs/tech-stack-upgrade/SECURITY_IMPLEMENTATION.md)
- [éœ€æ±‚æ–‡æ¡£](.kiro/specs/tech-stack-upgrade/requirements.md)
- [è®¾è®¡æ–‡æ¡£](.kiro/specs/tech-stack-upgrade/design.md)
- [ä»»åŠ¡åˆ—è¡¨](.kiro/specs/tech-stack-upgrade/tasks.md)

---

**æŠŠæ‘‡å¤´å¹æ¯å˜æˆå¥åº·æ‘‡å¤´ï¼Œè®©çœ‹æ–°é—»æˆä¸ºä¸€ç§é¢ˆæ¤è¿åŠ¨ï¼** ğŸ“°ğŸ¤¸â€â™‚ï¸

<p align="center">Made with â¤ï¸ by 024812</p>
