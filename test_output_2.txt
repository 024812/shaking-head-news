
> shaking-head-news@2.0.0 test:e2e
> playwright test tests/e2e/auth-and-settings.spec.ts --project=chromium

[1A[2K[2m[WebServer] [22m [33m[1mâš [22m[39m The config property `experimental.turbo` is deprecated. Move this setting to `config.turbopack` or run `npx @next/codemod@latest next-experimental-turbo-to-turbopack .`

[1A[2K[2m[WebServer] [22m[Storage] Redis not configured, using in-memory storage (data will not persist)


Running 15 tests using 11 workers

[1A[2K[1/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:4:3 â€º User Authentication and Settings Flow â€º should display login page
[1A[2K[2/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:31:3 â€º User Authentication and Settings Flow â€º should navigate back to home from login page
[1A[2K[3/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:57:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected RSS page
[1A[2K[4/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:22:3 â€º User Authentication and Settings Flow â€º should have continue without login link
[1A[2K[5/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:41:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected settings page
[1A[2K[6/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:49:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected stats page
[1A[2K[7/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:76:3 â€º User Authentication and Settings Flow â€º login page should be responsive on mobile
[1A[2K[8/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:106:3 â€º User Authentication and Settings Flow â€º should have proper form structure
[1A[2K[9/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:65:3 â€º User Authentication and Settings Flow â€º should preserve callback URL when redirecting to login
[1A[2K[10/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:98:3 â€º User Authentication and Settings Flow â€º should display terms and privacy notice
[1A[2K[11/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:118:3 â€º User Authentication and Settings Flow â€º should have accessible login button
[1A[2K[12/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:132:3 â€º User Authentication and Settings Flow â€º should display Google icon in login button
[1A[2K[2m[WebServer] [22m[StatsPage] Error loading stats: Error: NEXT_REDIRECT
[2m[WebServer] [22m    at StatsContent (app\(main)\stats\page.tsx:51:15)
[2m[WebServer] [22m[0m [90m 49 |[39m
[2m[WebServer] [22m [90m 50 |[39m     [36mif[39m ([33m![39msession[33m?[39m[33m.[39muser) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 51 |[39m       redirect([32m'/login'[39m)
[2m[WebServer] [22m [90m    |[39m               [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 52 |[39m     }
[2m[WebServer] [22m [90m 53 |[39m
[2m[WebServer] [22m [90m 54 |[39m     [90m// è·å–ç”¨æˆ·è®¾ç½®ï¼ˆè·å–æ¯æ—¥ç›®æ ‡ï¼‰[39m[0m {
[2m[WebServer] [22m  digest: [32m'NEXT_REDIRECT;replace;/login;307;'[39m
[2m[WebServer] [22m}

[1A[2K[13/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:141:3 â€º User Authentication and Settings Flow â€º login page should have proper styling
[1A[2K[14/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:153:3 â€º User Authentication and Settings Flow â€º should handle navigation between login and home
[1A[2K[15/15] [chromium] â€º tests\e2e\auth-and-settings.spec.ts:177:3 â€º Settings Page (Mock Auth) â€º should show settings page structure when authenticated
[1A[2K  1) [chromium] â€º tests\e2e\auth-and-settings.spec.ts:22:3 â€º User Authentication and Settings Flow â€º should have continue without login link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('a[href="/"]')
    Expected: visible
    Error: strict mode violation: locator('a[href="/"]') resolved to 3 elements:
        1) <a href="/" class="flex items-center gap-2">â€¦</a> aka getByRole('link', { name: 'æ‘‡å¤´çœ‹æ–°é—»' })
        2) <a href="/" class="text-sm font-medium transition-colors hover:text-primary">é¦–é¡µ</a> aka getByRole('link', { name: 'é¦–é¡µ' })
        3) <a href="/" class="text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400">ç»§ç»­æµè§ˆï¼ˆæ— éœ€ç™»å½•ï¼‰</a> aka getByRole('link', { name: 'ç»§ç»­æµè§ˆï¼ˆæ— éœ€ç™»å½•ï¼‰' })

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('a[href="/"]')[22m


      25 |     // Check for "continue without login" link
      26 |     const continueLink = page.locator('a[href="/"]')
    > 27 |     await expect(continueLink).toBeVisible()
         |                                ^
      28 |     await expect(continueLink).toContainText(/ç»§ç»­æµè§ˆ|æ— éœ€ç™»å½•/)
      29 |   })
      30 |
        at C:\Users\sli\OneDrive\Projects\shaking-head-news\tests\e2e\auth-and-settings.spec.ts:27:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-and-settings-User-Aut-f225f-continue-without-login-link-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-and-settings-User-Aut-f225f-continue-without-login-link-chromium\error-context.md


[1A[2K  2) [chromium] â€º tests\e2e\auth-and-settings.spec.ts:57:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected RSS page 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: page.waitForURL: Test timeout of 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation until "load"
      navigated to "http://localhost:3000/rss"
    ============================================================

      59 |
      60 |     // Should redirect to login
    > 61 |     await page.waitForURL(/\/login/)
         |                ^
      62 |     await expect(page).toHaveURL(/\/login/)
      63 |   })
      64 |
        at C:\Users\sli\OneDrive\Projects\shaking-head-news\tests\e2e\auth-and-settings.spec.ts:61:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-and-settings-User-Aut-4b039-ccessing-protected-RSS-page-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-and-settings-User-Aut-4b039-ccessing-protected-RSS-page-chromium\error-context.md


[1A[2K  3) [chromium] â€º tests\e2e\auth-and-settings.spec.ts:49:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected stats page 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: page.waitForURL: Test timeout of 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation until "load"
      navigated to "http://localhost:3000/stats"
    ============================================================

      51 |
      52 |     // Should redirect to login
    > 53 |     await page.waitForURL(/\/login/)
         |                ^
      54 |     await expect(page).toHaveURL(/\/login/)
      55 |   })
      56 |
        at C:\Users\sli\OneDrive\Projects\shaking-head-news\tests\e2e\auth-and-settings.spec.ts:53:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results\auth-and-settings-User-Aut-82285-essing-protected-stats-page-chromium\test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results\auth-and-settings-User-Aut-82285-essing-protected-stats-page-chromium\error-context.md


[1A[2K  3 failed
    [chromium] â€º tests\e2e\auth-and-settings.spec.ts:22:3 â€º User Authentication and Settings Flow â€º should have continue without login link 
    [chromium] â€º tests\e2e\auth-and-settings.spec.ts:49:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected stats page 
    [chromium] â€º tests\e2e\auth-and-settings.spec.ts:57:3 â€º User Authentication and Settings Flow â€º should redirect to login when accessing protected RSS page 
  1 skipped
  11 passed (44.5s)

[36m  Serving HTML report at http://localhost:50018. Press Ctrl+C to quit.[39m
npm error A complete log of this run can be found in: C:\Users\sli\AppData\Local\npm-cache\_logs\2025-11-27T07_22_50_567Z-debug-0.log
