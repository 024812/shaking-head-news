# 当前测试计划

## 📋 测试背景

已完成的修复：

- ✅ 统计页面健康提醒立即触发问题
- ✅ 统计数字为0问题（添加内存存储）
- ✅ 所有 storage 类型错误
- ✅ Footer 布局优化
- ✅ 设置页面重复描述移除
- ✅ 关于页面内容优化

最新提交：4474e6b

---

## 🎯 当前测试重点

### 1. Vercel 部署验证（最优先）

**目标**：确认 Vercel 构建成功并且应用可以访问

**步骤**：

1. 访问 Vercel Dashboard
2. 检查最新部署状态（commit 4474e6b）
3. 确认构建成功（绿色勾）
4. 获取部署 URL

**预期结果**：

- 构建成功，无错误
- 可以访问部署的网站

---

### 2. 统计页面功能测试（核心）

**目标**：验证统计页面修复是否生效

**测试场景 A：健康提醒不立即触发**

1. 访问 `/stats` 页面
2. 观察右下角是否有通知弹出
3. 等待 5 秒

**预期结果**：

- ❌ 不应该立即显示"该活动颈椎了"的通知
- ✅ 页面正常加载，显示统计卡片

**测试场景 B：统计数据记录**

1. 返回首页
2. 打开右下角旋转控制
3. 启用连续模式，间隔设为 10 秒
4. 等待 30-60 秒（让页面旋转几次）
5. 返回统计页面并刷新

**预期结果**：

- ✅ 统计数字应该更新（不再是 0）
- ✅ 图表应该显示数据点

**注意事项**：

- 需要先登录才能记录数据
- 如果没有配置 Redis，数据存储在内存中（刷新服务器会丢失）

---

### 3. 环境变量配置检查

**必需配置**（否则功能不完整）：

```
NEXTAUTH_SECRET=<随机密钥>
NEXTAUTH_URL=https://your-domain.vercel.app
AUTH_SECRET=<与 NEXTAUTH_SECRET 相同>
AUTH_GOOGLE_ID=<Google OAuth Client ID>
AUTH_GOOGLE_SECRET=<Google OAuth Client Secret>
```

**推荐配置**（用于数据持久化）：

```
UPSTASH_REDIS_REST_URL=<Redis URL>
UPSTASH_REDIS_REST_TOKEN=<Redis Token>
```

**检查方法**：

1. Vercel Dashboard → 项目 → Settings → Environment Variables
2. 确认所有必需变量已配置
3. 如果缺少，添加后重新部署

---

### 4. UI/UX 改进验证

**测试项目**：

**A. Footer 布局**

- 访问任意页面
- 滚动到底部
- 确认版权信息和 GitHub 链接在同一行

**B. 设置页面**

- 访问 `/settings`
- 检查"旋转控制"卡片
- 确认没有重复的描述文本

**C. 关于页面**

- 访问 `/about`
- 确认显示项目背景和技术栈
- 检查页面底部空白是否减少

---

## 🔍 详细测试流程

### 步骤 1：访问 Vercel 部署

```
1. 打开 Vercel Dashboard
2. 找到 shaking-head-news 项目
3. 点击最新的部署
4. 复制部署 URL（例如：https://shaking-head-news.vercel.app）
```

### 步骤 2：基础功能测试

```
1. 访问部署 URL
2. 检查首页是否正常加载
3. 检查新闻列表是否显示
4. 测试页面旋转功能
```

### 步骤 3：登录测试

```
1. 点击右上角登录按钮
2. 使用 Google 账号登录
3. 确认登录成功，显示用户头像
4. 测试登出功能
```

### 步骤 4：统计页面测试

```
1. 登录后访问 /stats
2. 确认不会立即显示健康提醒
3. 返回首页，启用旋转
4. 等待几个旋转周期
5. 返回统计页面，刷新
6. 确认统计数字更新
```

### 步骤 5：设置和其他页面测试

```
1. 访问 /settings
2. 测试各项设置功能
3. 访问 /about
4. 访问 /rss
5. 检查所有页面的 UI 是否正常
```

---

## 📊 测试记录表

### 部署信息

- **部署 URL**: ****\*\*****\_\_\_****\*\*****
- **Commit**: 4474e6b
- **测试时间**: ****\*\*****\_\_\_****\*\*****

### 测试结果

| 测试项             | 状态 | 备注 |
| ------------------ | ---- | ---- |
| Vercel 构建成功    | ⬜   |      |
| 网站可访问         | ⬜   |      |
| 首页加载正常       | ⬜   |      |
| 新闻列表显示       | ⬜   |      |
| 页面旋转功能       | ⬜   |      |
| Google 登录        | ⬜   |      |
| 统计页面不立即提醒 | ⬜   |      |
| 统计数据可记录     | ⬜   |      |
| Footer 布局正确    | ⬜   |      |
| 设置页面无重复     | ⬜   |      |
| 关于页面优化       | ⬜   |      |

---

## 🚨 已知限制

### 内存存储模式

- 如果没有配置 Redis，统计数据存储在内存中
- 数据在服务器重启后会丢失
- 不同的 Serverless 函数实例不共享数据

### 解决方案

- 在 Vercel 中添加 Upstash Redis
- 配置环境变量后重新部署

---

## ✅ 测试通过标准

**最低标准**（可以发布）：

- ✅ 网站可以访问
- ✅ 首页和新闻功能正常
- ✅ 统计页面不会立即显示健康提醒
- ✅ UI 改进生效

**理想标准**（完整功能）：

- ✅ 所有最低标准
- ✅ Google OAuth 登录正常
- ✅ 统计数据可以记录和显示
- ✅ Redis 已配置，数据持久化

---

## 📝 下一步行动

### 如果测试通过

1. ✅ 在 GitHub 创建 Release
2. ✅ 更新 README.md 添加部署链接
3. ✅ 编写用户使用指南

### 如果测试失败

1. 🔍 查看 Vercel 部署日志
2. 🔍 检查浏览器控制台错误
3. 🔧 修复问题并重新部署
4. 🔄 重新测试

---

## 🎯 测试优先级

**P0 - 必须测试**：

1. Vercel 部署状态
2. 统计页面健康提醒
3. 基础页面访问

**P1 - 重要测试**：4. 统计数据记录 5. Google 登录 6. UI 改进验证

**P2 - 可选测试**：7. 性能测试（Lighthouse）8. 移动端测试 9. 跨浏览器测试

---

**开始测试前，请先确认 Vercel 部署状态！**
